<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Futbol Skorları (Önizleme)</title>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <style>
        /* Embedding the CSS from index.css */
        :root {
            --bg-color: #0d1117;
            --card-bg: #161b22;
            --primary-color: #2ea043;
            --text-main: #c9d1d9;
            --text-secondary: #8b949e;
            --border-color: #30363d;
            --win-color: #238636;
            --loss-color: #da3633;
            --draw-color: #6e7681;
        }

        body {
            margin: 0;
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.5;
        }

        #root {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            width: 100%;
            box-sizing: border-box;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        h1 {
            font-size: 2.5rem;
            margin: 0;
            background: linear-gradient(45deg, #2ea043, #56d364);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Search Area */
        .search-area {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            justify-content: center;
        }

        input {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-main);
            padding: 0.8rem 1.2rem;
            border-radius: 8px;
            font-size: 1rem;
            width: 100%;
            max-width: 300px;
            transition: border-color 0.2s;
        }

        input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
        }

        button:hover {
            opacity: 0.9;
        }

        button:active {
            transform: scale(0.98);
        }

        /* Team Info */
        .team-info {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            animation: fadeIn 0.5s ease-out;
        }

        .team-logo {
            max-width: 150px;
            height: auto;
            margin-bottom: 1rem;
        }

        .team-details h2 {
            margin-top: 0;
            color: white;
        }

        .team-meta {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        /* Match List */
        .match-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .match-card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s;
        }

        .match-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .match-card.win {
            border-left: 5px solid var(--win-color);
        }

        .match-card.loss {
            border-left: 5px solid var(--loss-color);
        }

        .match-card.draw {
            border-left: 5px solid var(--draw-color);
        }

        .teams {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
        }

        .vs {
            color: var(--text-secondary);
            font-size: 0.8rem;
            margin: 0 1rem;
        }

        .score-badge {
            background-color: #21262d;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 700;
            font-family: monospace;
            font-size: 1.2rem;
        }

        /* Footer */
        footer {
            margin-top: auto;
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Mobile */
        @media (max-width: 600px) {
            .search-area {
                flex-direction: column;
            }

            .match-card {
                flex-direction: column;
                gap: 0.5rem;
                text-align: center;
            }

            .teams {
                flex-direction: column;
                gap: 0.2rem;
            }
        }

        .loader {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 1.2rem;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- COMPONENTS ---

        function Header() {
            return (
                <header>
                    <h1>⚽ Futbol Radar</h1>
                    <p style={{ color: 'var(--text-secondary)' }}>Takım İstatistikleri ve Son Maçlar</p>
                </header>
            )
        }

        function SearchArea({ onSearch, loading }) {
            const [term, setTerm] = React.useState('')

            const handleSubmit = (e) => {
                e.preventDefault()
                if (term.trim()) {
                    onSearch(term)
                }
            }

            return (
                <form className="search-area" onSubmit={handleSubmit}>
                    <input
                        type="text"
                        placeholder="Takım adı girin (örn. Galatasaray)..."
                        value={term}
                        onChange={(e) => setTerm(e.target.value)}
                        disabled={loading}
                    />
                    <button type="submit" disabled={loading}>
                        {loading ? 'Aranıyor...' : 'Ara'}
                    </button>
                </form>
            )
        }

        function TeamInfo({ team }) {
            if (!team) return null

            return (
                <div className="team-info">
                    <img src={team.strTeamBadge} alt={team.strTeam} className="team-logo" />
                    <div className="team-details">
                        <h2>{team.strTeam}</h2>
                        <div className="team-meta">
                            <span>{team.strLeague}</span> • <span>Established {team.intFormedYear}</span>
                        </div>
                        <p style={{ maxWidth: '600px', margin: '0 auto', fontSize: '0.9rem', color: '#8b949e' }}>
                            {team.strDescriptionEN ? team.strDescriptionEN.substring(0, 200) + '...' : ''}
                        </p>
                    </div>
                </div>
            )
        }

        function MatchList({ matches, teamId }) {
            if (!matches || matches.length === 0) return null

            const getResultClass = (match) => {
                const isHome = match.idHomeTeam == teamId
                const usInfo = isHome ? { score: match.intHomeScore, opponent: match.strAwayTeam } : { score: match.intAwayScore, opponent: match.strHomeTeam }
                const themInfo = isHome ? { score: match.intAwayScore } : { score: match.intHomeScore }

                const ourScore = parseInt(usInfo.score || 0)
                const theirScore = parseInt(themInfo.score || 0)

                if (ourScore > theirScore) return 'win'
                if (ourScore < theirScore) return 'loss'
                return 'draw'
            }

            return (
                <div className="match-list">
                    <h3 style={{ borderBottom: '1px solid #30363d', paddingBottom: '0.5rem' }}>Son 5 Maç</h3>
                    {matches.map((match) => (
                        <div key={match.idEvent} className={`match-card ${getResultClass(match)}`}>
                            <div className="teams">
                                <span style={{ textAlign: 'right', flex: 1 }}>{match.strHomeTeam}</span>
                                <span className="vs">vs</span>
                                <span style={{ textAlign: 'left', flex: 1 }}>{match.strAwayTeam}</span>
                            </div>
                            <div className="score-badge">
                                {match.intHomeScore} - {match.intAwayScore}
                            </div>
                        </div>
                    ))}
                </div>
            )
        }

        function Footer() {
            return (
                <footer>
                    <p>Final Ödevi &copy; 2025 - Sefa A. | Powered by TheSportsDB</p>
                </footer>
            )
        }

        // --- APP COMPONENT ---

        function App() {
            const [loading, setLoading] = React.useState(false)
            const [error, setError] = React.useState(null)
            const [team, setTeam] = React.useState(null)
            const [matches, setMatches] = React.useState([])

            const searchTeam = async (term) => {
                setLoading(true)
                setError(null)
                setTeam(null)
                setMatches([])

                try {
                    // Try the free test key "3" if no real key
                    const teamResponse = await axios.get(`https://www.thesportsdb.com/api/v1/json/3/searchteams.php?t=${term}`)

                    if (!teamResponse.data.teams) {
                        throw new Error('Takım bulunamadı. Lütfen başka bir isim deneyin.')
                    }

                    const foundTeam = teamResponse.data.teams[0]
                    setTeam(foundTeam)

                    const matchesResponse = await axios.get(`https://www.thesportsdb.com/api/v1/json/3/eventslast.php?id=${foundTeam.idTeam}`)

                    if (matchesResponse.data.results) {
                        setMatches(matchesResponse.data.results)
                    }

                } catch (err) {
                    console.error(err)
                    setError(err.message || 'Bir hata oluştu')
                } finally {
                    setLoading(false)
                }
            }

            return (
                <div className="container">
                    <Header />
                    <SearchArea onSearch={searchTeam} loading={loading} />

                    {error && (
                        <div style={{ color: '#da3633', textAlign: 'center', marginBottom: '1rem', background: 'rgba(218, 54, 51, 0.1)', padding: '1rem', borderRadius: '8px' }}>
                            ⚠️ {error}
                        </div>
                    )}

                    {loading && !team && (
                        <div style={{ textAlign: 'center', margin: '2rem' }}>
                            <div className="loader">Yükleniyor...</div>
                        </div>
                    )}

                    {team && (
                        <>
                            <TeamInfo team={team} />
                            <MatchList matches={matches} teamId={team.idTeam} />
                        </>
                    )}

                    <Footer />
                </div>
            )
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>